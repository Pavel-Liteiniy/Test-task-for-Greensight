"use strict";!function(){let e=!1,t=document.querySelector(".pickup__wrapper--address-list"),n=document.documentElement.clientWidth,r=document.querySelector(".tabs__inner"),a=Array.from(r.querySelectorAll("input")),o=Array.from(document.querySelector(".carrier__inner").children),d=[{coordinates:[55.977483,37.163164],address:"Зеленоград, к1801",pointDescription:"Рядом с магазином Атак",id:"zelenograd_k1801",value:"zelenograd_k1801",name:"pickup-point"},{coordinates:[55.984671,37.151673],address:"Зеленоград, к1446",pointDescription:"Напротив входа в кафе Шоколадница",id:"zelenograd_k1446",value:"zelenograd_k1446",name:"pickup-point"}],l=e=>{n=document.documentElement.clientWidth,n<=1200?e.behaviors.disable("drag"):e.behaviors.enable("drag")};ymaps.ready((()=>{let n=new ymaps.Map("map",{center:[55.97,37.14],zoom:12,controls:[],behaviors:["default"]}),a=new ymaps.GeoObjectCollection(null,{preset:"islands#yellowIcon"}),o=e=>{let t=e.getBounds();var r,a;a=.001,(r=t)[0][0]-=a,r[0][1]-=a,r[1][0]+=a,r[1][1]+=a,n.setBounds(t,{checkZoomRange:!0}).then((()=>{n.getZoom()>15&&n.setZoom(15)}))};r.addEventListener("change",(t=>{e||"pickup"!==t.target.value||(n.container.fitToViewport(),e=!0,o(a))})),a.events.add("click",(e=>{let t=e.get("target").geometry.getCoordinates().join(",");i.forEach((e=>{if(e.dataset.coordinates===t)return e.checked=!0,!0}))})),t.addEventListener("change",(e=>{a.each((t=>{t.geometry.getCoordinates().join(",")===e.target.dataset.coordinates&&t.balloon.open()}))})),l(n),window.addEventListener("resize",(e=>{l(n)})),d.forEach((e=>{a.add(new ymaps.Placemark(e.coordinates,{balloonContent:[`<p><b>${e.address}</b></p>`,`<p>${e.pointDescription}</p>`].join(""),balloonContentFooter:"Пункт Самовывоза"},{iconLayout:"default#image",iconImageHref:"./img/pin.svg",iconImageSize:[34,40],iconImageOffset:[-17,-40]})),n.geoObjects.add(a),o(a)}))})),((e,t)=>{let n=document.createDocumentFragment();t.forEach((e=>{let t=document.createElement("input");t.setAttribute("type","radio"),t.setAttribute("name",e.name),t.setAttribute("id",e.id),t.setAttribute("value",e.value),t.setAttribute("data-coordinates",e.coordinates),t.setAttribute("required",""),t.classList.add("visually_hidden"),n.appendChild(t);let r=document.createElement("label");r.setAttribute("for",e.id),r.textContent=e.address,n.appendChild(r)})),e.appendChild(n)})(t,d);let i=t.querySelectorAll('input[type="radio"]'),c=e=>{o.forEach((t=>Array.from(t.classList).includes(e)?t.style.display="block":t.style.display="none"))};a.forEach((e=>{e.checked&&c(e.value)})),r.addEventListener("change",(e=>{e.preventDefault(),c(e.target.value)}))}(),function(){const e=/[^-а-яё ]+/i,t=/^\+\d\(\d{3}\)\d{3}-\d{2}-\d{2}$/;let n=document.querySelector(".delivery__form"),r=document.getElementById("contact-name"),a=r.parentElement,o=document.getElementById("phone-number"),d=o.parentElement,l=(document.getElementById("ship-to-address").parentElement,IMask(o,{mask:"+{7}(000)000-00-00"})),i=(e,t)=>{if(null===t.querySelector(".delivery__alert")){let n=document.createElement("p");n.classList.add("delivery__alert"),n.textContent=e,t.appendChild(n)}},c=e=>{null!==e.querySelector(".delivery__alert")&&e.querySelector(".delivery__alert").remove()};r.addEventListener("input",(t=>{e.test(t.target.value)?i("Используйте только кириллицу, пробел и тире",a):c(a)})),o.addEventListener("change",(()=>{t.test(l.value)?c(d):i("Введите корректный номер телефона",d)})),o.addEventListener("input",(()=>{t.test(l.value)&&c(d)})),n.addEventListener("submit",(e=>{let t=n.querySelectorAll(".delivery__alert");Array.from(t).length>0&&e.preventDefault()}))}();